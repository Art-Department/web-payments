!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./js/web-payments.js")}({"../../../../../../usr/local/lib/node_modules/build/node_modules/@babel/runtime/helpers/typeof.js":function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},"./js/web-payments.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../../../../usr/local/lib/node_modules/build/node_modules/@babel/runtime/helpers/typeof.js"),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);function post(e,t,n){var o=e.actionTrigger,r=e.csrf,i=new FormData;return i.append(r[0],r[1]),Object.keys(n).forEach(function(e){var t=n[e];i.append(e,"object"===_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(t)?JSON.stringify(t):t)}),fetch("/".concat(o,"/web-payments/stripe/").concat(t),{method:"POST",body:i,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()})}function updateItems(e,t,n,o){o("update-display-items",{cartId:t.cartId,items:e}).then(function(o){var r=o.total,i=o.displayItems,p=o.shippingOptions;t.update({items:e}),n.update({total:r,displayItems:i,shippingOptions:p})}).catch(function(e){throw e})}function onShippingAddressChange(e,t,n){n("update-address",{cartId:t.cartId,items:t.items,address:e.shippingAddress}).then(function(n){t.update({shippingAddress:e.shippingAddress}),e.updateWith(n)}).catch(function(){e.updateWith({status:"fail"})})}function onShippingOptionChange(e,t,n){n("update-shipping",{cartId:t.cartId,items:t.items,address:t.shippingAddress,method:e.shippingOption}).then(function(n){t.update({shippingOption:e.shippingOption}),e.updateWith(n)}).catch(function(){e.updateWith({status:"fail"})})}function onToken(e,state,post){post("pay",{cartId:state.cartId,items:state.items,token:e.token,payerName:e.payerName,payerEmail:e.payerEmail,payerPhone:e.payerPhone,shippingAddress:e.shippingAddress,shippingMethod:e.shippingOption}).then(function(data){e.complete(data.status),state.onComplete.js&&eval("const cwp = { number: '"+data.number+"' };"+state.onComplete.js),state.onComplete.redirect&&(window.location=state.onComplete.redirect.replace("{number}",data.number))}).catch(function(){e.complete("fail")})}function onPaymentMethod(e,t,n){e.token=e.paymentMethod,onToken(e,t,n)}window.CraftWebPayments=function(e){Object.isFrozen(e)||(e=Object.freeze(e));var t=document.getElementById(e.id),n=window.Stripe(e.stripeApiKey),o={actionTrigger:e.actionTrigger,csrf:e.csrf},r={cartId:e.cart.id,items:e.cart.items,shippingAddress:null,shippingOption:null,onComplete:e.onComplete,update:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}},i=n.paymentRequest({country:e.country.toUpperCase(),currency:e.currency.toLowerCase(),displayItems:e.cart.displayItems,total:e.cart.total,requestShipping:!!e.requestShipping,shippingType:"boolean"==typeof e.requestShipping?"shipping":e.requestShipping,shippingOptions:e.shippingMethods,requestPayerName:e.requestDetails.indexOf("name")>-1,requestPayerEmail:e.requestDetails.indexOf("email")>-1,requestPayerPhone:e.requestDetails.indexOf("phone")>-1}),p=function(e,t){return post(o,e,t)};return i.canMakePayment().then(function(){n.elements().create("paymentRequestButton",{paymentRequest:i,style:{paymentRequestButton:e.style}}).mount(t);var o=function(e){return function(t){e(t,r,p)}};i.on("shippingaddresschange",o(onShippingAddressChange)),i.on("shippingoptionchange",o(onShippingOptionChange)),"PaymentIntents"===e.stripeGatewayType?i.on("paymentmethod",o(onPaymentMethod)):i.on("token",o(onToken))}).catch(console.error),Object.freeze({get items(){return Object.freeze(r.items.map(function(e){return Object.freeze(e)}))},set items(e){updateItems(e,r,i,p)},refresh:function(){updateItems(null,r,i,p)},reload:function(){return window.CraftWebPayments(e)}})}}});
//# sourceMappingURL=web-payments.min.js.map